<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.13.3">
<title>Visualizations | OHDSI-Stroke</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.dcdbf18e.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.ea9fd553.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.dcdbf18e.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.ea9fd553.css">
<link rel="modulepreload" href="./_observablehq/client.33da7c34.js">
<link rel="modulepreload" href="./_observablehq/runtime.e080113b.js">
<link rel="modulepreload" href="./_observablehq/stdlib.73a8ec5a.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/e780feca.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.4ef1d259.js">
<link rel="modulepreload" href="./_npm/@observablehq/plot@0.6.17/d761ef9b.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/9cffc2bd.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/72f4716c.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/18cbf477.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/e93ca09f.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/0f2de24d.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/65eb105b.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/7ef8fb2e.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/aeb57b94.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/1d2aed74.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/5ced1d52.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/9ba9c7f3.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/4202580c.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/cdd7e898.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/b4e2ad9a.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/5e804d15.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/86074ef6.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/40599fb3.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/e49e792c.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/8d1e5425.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/20d3f133.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/7553081f.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/0dfd751c.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/3c90ee06.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/843b6a76.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/ba24c2e7.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/4d94e5b7.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/6d3a6726.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/9f03c579.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/07c9626f.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/b58a267d.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/004da2ac.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/b5786b3f.js">
<link rel="modulepreload" href="./_npm/interval-tree-1d@1.0.4/53fe8176.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/e08981d9.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/02d43215.js">
<link rel="modulepreload" href="./_npm/binary-search-bounds@2.0.5/cbf6ba23.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/aa00730b.js">
<link rel="icon" href="./_file/observable.1af93621.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "./_observablehq/client.33da7c34.js";
import {registerFile} from "./_observablehq/stdlib.73a8ec5a.js";

registerFile("./high_risk_cohort_no_dementia.csv", {"name":"./high_risk_cohort_no_dementia.csv","mimeType":"text/csv","path":"./_file/high_risk_cohort_no_dementia.7704ca6b.csv","lastModified":1764813028922,"size":7178755});

define({id: "1d803bd4", inputs: ["FileAttachment"], outputs: ["data"], body: async (FileAttachment) => {
const data = await FileAttachment("./high_risk_cohort_no_dementia.csv").csv({typed: true});
return {data};
}});

define({id: "fc4a7439", inputs: ["data","d3"], outputs: ["mhBurdenData","mhBurdenByAphasia","mhTotals"], body: (data,d3) => {
const mhBurdenData = data.map(d => {
  const numConditions = [
    d.has_depression,
    d.has_anxiety,
    d.has_bipolar,
    d.has_schizophrenia,
    d.has_ptsd,
    d.has_psychotic_disorder,
    d.has_seizure
  ].filter(val => val === 1).length;
  
  return {
    has_aphasia: d.has_aphasia,
    num_conditions: numConditions
  };
});

const mhBurdenByAphasia = d3.rollups(
  mhBurdenData,
  v => v.length,
  d => d.num_conditions,
  d => d.has_aphasia
).flatMap(([numConditions, aphasiaGroups]) => 
  aphasiaGroups.map(([hasAphasia, count]) => ({
    num_conditions: numConditions,
    group: hasAphasia === 1 ? 'With Aphasia' : 'Without Aphasia',
    count
  }))
).sort((a, b) => a.num_conditions - b.num_conditions);

// Calculate totals for percentages
const mhTotals = d3.rollup(
  mhBurdenByAphasia,
  v => d3.sum(v, d => d.count),
  d => d.group
);
return {mhBurdenData,mhBurdenByAphasia,mhTotals};
}});

define({id: "37c790a9", inputs: ["Plot","mhBurdenByAphasia","mhTotals","display"], body: async (Plot,mhBurdenByAphasia,mhTotals,display) => {
display(await(
Plot.plot({
  caption: "Distribution of Mental Health Condition Burden by Aphasia Status",
  marginLeft: 60,
  height: 300,
  x: { 
    label: "Number of Mental Health Conditions",
    domain: [0, 1, 2, 3, 4, 5, 6, 7]
  },
  y: { label: "Percent of Group" },
  color: {
    domain: ['With Aphasia', 'Without Aphasia'],
    range: ['#ff7f0e', '#1f77b4'],
    legend: true
  },
  marks: [
    Plot.barY(mhBurdenByAphasia, {
      x: "num_conditions",
      y: d => (d.count / mhTotals.get(d.group)) * 100,
      fill: "group",
      order: ['With Aphasia', 'Without Aphasia'],  // Add this line
      tip: true,
      channels: {
        "# Conditions": d => d.num_conditions,
        Percent: d => `${((d.count / mhTotals.get(d.group)) * 100).toFixed(2)}%`,
        Count: d => d.count.toLocaleString()
      }
    }),
    Plot.ruleY([0])
  ]
})
))
}});

define({id: "37e34a71", inputs: ["data","d3"], outputs: ["pimBurdenData","pimBurdenByAphasia","pimTotals"], body: (data,d3) => {
// num PIMs per pt using atc class types
const pimBurdenData = data.map(d => {
  const pim_count = [
    d.has_antidepressant,
    d.has_anxiolytic,
    d.has_antipsychotic,
    d.has_hypnotic_sedative
  ].filter(val => val === 1).length;
  
  return {
    has_aphasia: d.has_aphasia,
    pim_count: pim_count
  };
});
const pimBurdenByAphasia = d3.rollups(
  pimBurdenData,
  v => v.length,
  d => d.pim_count >= 4 ? 4 : d.pim_count,  // group 4+ together
  d => d.has_aphasia
).flatMap(([numPims, aphasiaGroups]) => 
  aphasiaGroups.map(([hasAphasia, count]) => ({
    num_pims: numPims,
    group: hasAphasia === 1 ? 'With Aphasia' : 'Without Aphasia',
    count
  }))
).sort((a, b) => a.num_pims - b.num_pims);
const pimTotals = d3.rollup(
  pimBurdenByAphasia,
  v => d3.sum(v, d => d.count),
  d => d.group
);
return {pimBurdenData,pimBurdenByAphasia,pimTotals};
}});

define({id: "7055d6f3", inputs: ["Plot","pimBurdenByAphasia","pimTotals","display"], body: async (Plot,pimBurdenByAphasia,pimTotals,display) => {
display(await(
Plot.plot({
  caption: "Distribution of PIM Burden by Aphasia Status",
  marginLeft: 60,
  height: 300,
  x: { 
    label: "Number of PIMs",
    domain: [0, 1, 2, 3, 4],
    tickFormat: d => d === 4 ? "4+" : d
  },
  y: { label: "Percent of Group" },
  color: {
    domain: ['With Aphasia', 'Without Aphasia'],
    range: ['#ff7f0e', '#1f77b4'],
    legend: true
  },
  marks: [
    Plot.barY(pimBurdenByAphasia, {
      x: "num_pims",
      y: d => (d.count / pimTotals.get(d.group)) * 100,
      fill: "group",
      order: ['With Aphasia', 'Without Aphasia'],
      tip: true,
      channels: {
        "# PIMs": d => d.num_pims === 4 ? "4+" : d.num_pims,
        Percent: d => `${((d.count / pimTotals.get(d.group)) * 100).toFixed(2)}%`,
        Count: d => d.count.toLocaleString()
      }
    }),
    Plot.ruleY([0])
  ]
})
))
}});

define({id: "11d2cbde", inputs: ["d3","riskScoresByAphasia"], outputs: ["riskTotals"], body: (d3,riskScoresByAphasia) => {
const riskTotals = d3.rollup(
  riskScoresByAphasia,
  v => d3.sum(v, d => d.count),
  d => d.group
);
return {riskTotals};
}});

define({id: "1a83574b", inputs: ["d3","data"], outputs: ["riskScoresByAphasia"], body: (d3,data) => {
const riskScoresByAphasia = d3.rollups(
  data,
  v => v.length,
  d => d.total_risk_score,
  d => d.has_aphasia
).flatMap(([score, aphasiaGroups]) => 
  aphasiaGroups.map(([hasAphasia, count]) => ({
    score: score ?? 0,
    group: hasAphasia === 1 ? 'With Aphasia' : 'Without Aphasia',
    count
  }))
).sort((a, b) => a.score - b.score);
return {riskScoresByAphasia};
}});

define({id: "bd42e600", inputs: ["Plot","riskScoresByAphasia","riskTotals","display"], body: async (Plot,riskScoresByAphasia,riskTotals,display) => {
display(await(
Plot.plot({
  caption: "Distribution of Total Risk Scores by Aphasia Status",
  marginLeft: 60,
  height: 300,
  x: { 
    label: "Risk Score",
    domain: [0, 1, 2, 3, 4, 5]
  },
  y: { label: "Percent of Group" },
  color: {
    domain: ['With Aphasia', 'Without Aphasia'],
    range: ['#ff7f0e', '#1f77b4'],
    legend: true
  },
  marks: [
    Plot.barY(riskScoresByAphasia, {
      x: "score",
      y: d => (d.count / riskTotals.get(d.group)) * 100,
      fill: "group",
      order: ['With Aphasia', 'Without Aphasia'],  // order consistentcy
      tip: true,
      channels: {
        "Risk Score": d => d.score,
        Percent: d => `${((d.count / riskTotals.get(d.group)) * 100).toFixed(2)}%`,
        Count: d => d.count.toLocaleString()
      }
    }),
    Plot.ruleY([0])
  ]
})
))
}});

define({id: "1aa0f7f9", outputs: ["predictorsData"], body: () => {
const predictorsData = [
  {rank: 1, feature: "aphasia_x_polypharm", OR: 1.62},
  {rank: 2, feature: "has_anxiety", OR: 1.45},
  {rank: 3, feature: "has_any_discordance", OR: 1.38},
  {rank: 4, feature: "hyp_sed_risk", OR: 1.35},
  {rank: 5, feature: "has_polypharmacy_all_meds", OR: 1.31},
  {rank: 6, feature: "anxiolytic_risk", OR: 1.28},
  {rank: 7, feature: "has_seizure", OR: 1.24},
  {rank: 8, feature: "mh_burden", OR: 1.22},
  {rank: 9, feature: "has_any_mental_health_condition", OR: 1.18},
  {rank: 10, feature: "has_schizophrenia", OR: 1.16},
  {rank: 11, feature: "has_ptsd", OR: 1.15},
  {rank: 12, feature: "has_bipolar", OR: 1.12},
  {rank: 13, feature: "has_depression", OR: 1.10},
  {rank: 14, feature: "has_aphasia", OR: 1.08},
  {rank: 15, feature: "total_med_count", OR: 1.05}
];
return {predictorsData};
}});

define({id: "93980d98", inputs: ["Plot","predictorsData","display"], body: async (Plot,predictorsData,display) => {
display(await(
Plot.plot({
  width: 850,
  height: 800,
  marginLeft: 250,
  marginBottom: 80,
  insetLeft: 10,
  insetRight: 10,
  style: {
    fontSize: "15px",
    overflow: "visible"
  },
  y: {
    label: null,
    type: "band",
    padding: 0.6,
    tickSize: 0
  },
  x: {
    label: "Odds Ratio"
  },
  marks: [
    // Bars
    Plot.barX(predictorsData, {
      x: "OR",
      y: "feature",
      sort: { y: "x", reverse: true },
      fill: "#1f77b4"
    }),

    // OR value labels
    Plot.text(predictorsData, {
      x: "OR",
      y: "feature",
      text: d => d.OR.toFixed(2),
      dx: 6,
      dy: 3,
      textAnchor: "start",
      fontSize: 14,
      fill: "black"
    }),

    // OR = 1 reference line
    Plot.ruleX([1], {
      stroke: "red",
      strokeDasharray: "4,4",
      strokeWidth: 2
    })
  ]
})
))
}});

define({id: "d37b1b8e", outputs: ["readmissionData"], body: () => {
const readmissionData = [
  {group: 'Without Aphasia', rate: 7.50, pim_rate: 31.48, n: 44803},
  {group: 'With Aphasia', rate: 10.48, pim_rate: 34.71, n: 8265}
];
return {readmissionData};
}});

define({id: "b6980c70", inputs: ["Inputs","Generators","view"], outputs: ["metricInput","selectedMetric"], body: (Inputs,Generators,view) => {
const metricInput = Inputs.radio(
  ["Readmission Rate (%)", "PIM Prescription Rate (%)"],
  {label: "Metric to Display", value: "Readmission Rate (%)"}
);
const selectedMetric = Generators.input(metricInput);
view(metricInput);
return {metricInput,selectedMetric};
}});

define({id: "159c2026", inputs: ["Plot","selectedMetric","readmissionData","display"], body: async (Plot,selectedMetric,readmissionData,display) => {
display(await(
Plot.plot({
  width: 600,
  height: 400,
  marginBottom: 60,
  x: {label: null},
  y: {
    label: selectedMetric,
    grid: true,
    domain: [0, selectedMetric === "Readmission Rate (%)" ? 15 : 40]
  },
  color: {
    domain: ['Without Aphasia', 'With Aphasia'],
    range: ['#1f77b4', '#ff7f0e']
  },
  marks: [
    Plot.barY(readmissionData, {
      x: "group",
      y: selectedMetric === "Readmission Rate (%)" ? "rate" : "pim_rate",
      fill: "group",
      tip: true,
      title: d => selectedMetric === "Readmission Rate (%)" 
        ? `${d.group}\nReadmission Rate: ${d.rate.toFixed(2)}%\nN = ${d.n.toLocaleString()}`
        : `${d.group}\nPIM Prescription Rate: ${d.pim_rate.toFixed(2)}%\nN = ${d.n.toLocaleString()}`
    }),
    Plot.text(readmissionData, {
      x: "group",
      y: selectedMetric === "Readmission Rate (%)" ? "rate" : "pim_rate",
      text: d => selectedMetric === "Readmission Rate (%)" 
        ? `${d.rate.toFixed(2)}%`
        : `${d.pim_rate.toFixed(2)}%`,
      dy: -10,
      fill: "black",
      fontSize: 14,
      fontWeight: "bold"
    })
  ]
})
))
}});

define({id: "c5ba47a9", outputs: ["orData"], body: () => {
const orData = [
  {variable: 'PIM Exposure', or: 289059, ci_lower: 7.4, ci_upper: 1.13e10, p_value: 0.020, sig: '*', is_key: true},
  {variable: 'Psychotic Disorder', or: 2.02, ci_lower: 1.60, ci_upper: 2.56, p_value: 0.000, sig: '***', is_key: false},
  {variable: 'Seizure Disorder', or: 1.90, ci_lower: 1.74, ci_upper: 2.07, p_value: 0.000, sig: '***', is_key: false},
  {variable: 'Depression', or: 1.43, ci_lower: 1.33, ci_upper: 1.54, p_value: 0.000, sig: '***', is_key: false},
  {variable: 'Bipolar Disorder', or: 1.41, ci_lower: 1.19, ci_upper: 1.67, p_value: 0.000, sig: '***', is_key: false},
  {variable: 'Aphasia', or: 1.29, ci_lower: 1.17, ci_upper: 1.41, p_value: 0.000, sig: '***', is_key: true},
  {variable: 'Anxiety', or: 1.12, ci_lower: 1.04, ci_upper: 1.21, p_value: 0.002, sig: '**', is_key: false},
  {variable: 'PTSD', or: 0.97, ci_lower: 0.78, ci_upper: 1.21, p_value: 0.796, sig: '', is_key: false},
  {variable: 'Schizophrenia', or: 0.81, ci_lower: 0.55, ci_upper: 1.20, p_value: 0.292, sig: '', is_key: false}
];
return {orData};
}});

define({id: "579975bf", inputs: ["Inputs","Generators","view"], outputs: ["scaleInput","selectedScale"], body: (Inputs,Generators,view) => {
const scaleInput = Inputs.radio(
  ["Log Scale (Exclude PIM)", "Log Scale", "Linear Scale"],
  {label: "Y-Axis Scale", value: "Log Scale"}
);
const selectedScale = Generators.input(scaleInput);
view(scaleInput);
return {scaleInput,selectedScale};
}});

define({id: "815c3d5c", inputs: ["selectedScale","orData"], outputs: ["filteredORData","useLogScale"], body: (selectedScale,orData) => {
const filteredORData = selectedScale === "Log Scale (Exclude PIM)" 
  ? orData.filter(d => d.variable !== 'PIM Exposure')
  : orData;

const useLogScale = selectedScale !== "Linear Scale";
return {filteredORData,useLogScale};
}});

define({id: "76cb0af9", inputs: ["Plot","useLogScale","selectedScale","filteredORData","display"], body: async (Plot,useLogScale,selectedScale,filteredORData,display) => {
display(await(
Plot.plot({
  width: 800,
  height: 500,
  marginLeft: 150,
  marginRight: 20,
  x: {
    label: "Odds Ratio",
    type: useLogScale ? "log" : "linear",
    grid: true,
    domain: selectedScale === "Linear Scale" 
      ? [0, 300000]
      : selectedScale === "Log Scale"
      ? [0.5, 1e11]
      : [0.5, 3]
  },
  y: {
    label: null,
    domain: filteredORData.map(d => d.variable)
  },
  color: {
    domain: [true, false],
    range: ['#d62728', '#7f7f7f'],
    legend: false
  },
  marks: [
    Plot.ruleX([1], {stroke: "black", strokeDasharray: "4,4"}),
    Plot.link(filteredORData, {
      x1: "ci_lower",
      x2: "ci_upper",
      y: "variable",
      stroke: d => d.is_key,
      strokeWidth: 2
    }),
    Plot.dot(filteredORData, {
      x: "or",
      y: "variable",
      fill: d => d.is_key,
      r: 6,
      tip: true,
      title: d => `${d.variable}\nOR: ${d.or.toLocaleString()}\n95% CI: [${d.ci_lower.toLocaleString()}, ${d.ci_upper.toLocaleString()}]\np = ${d.p_value.toFixed(3)} ${d.sig}`
    }),
    Plot.text(filteredORData, {
      x: d => d.ci_upper,
      y: "variable",
      text: d => d.sig,
      dx: 15,
      fill: "black",
      fontSize: 12
    })
  ]
})
))
}});

define({id: "63992ba9", outputs: ["decompositionData"], body: () => {
const decompositionData = [
  {component: 'Differential PIM Exposure', contribution: 6.99, percent: 23.4, is_key: true},
  {component: 'Independent Aphasia Effect', contribution: 0.0, percent: 0.0, is_key: false},
  {component: 'Interaction Effect', contribution: 44.49, percent: 149.0, is_key: true}
];
return {decompositionData};
}});

define({id: "f81d42fc", inputs: ["Inputs","Generators","view"], outputs: ["decompMetricInput","selectedDecompMetric"], body: (Inputs,Generators,view) => {
const decompMetricInput = Inputs.radio(
  ["Contribution (per 1,000)", "% of Disparity"],
  {label: "Display Mode", value: "Contribution (per 1,000)"}
);
const selectedDecompMetric = Generators.input(decompMetricInput);
view(decompMetricInput);
return {decompMetricInput,selectedDecompMetric};
}});

define({id: "08688b04", inputs: ["Plot","selectedDecompMetric","decompositionData","display"], body: async (Plot,selectedDecompMetric,decompositionData,display) => {
display(await(
Plot.plot({
  width: 700,
  height: 300,
  marginLeft: 200,
  marginRight: 80,
  x: {
    label: selectedDecompMetric,
    grid: true,
    domain: selectedDecompMetric === "Contribution (per 1,000)" ? [0, 50] : [0, 160]
  },
  y: {
    label: null,
    domain: decompositionData.map(d => d.component)
  },
  color: {
    domain: [true, false],
    range: ['#d62728', '#7f7f7f'],
    legend: false
  },
  marks: [
    Plot.barX(decompositionData, {
      y: "component",
      x: selectedDecompMetric === "Contribution (per 1,000)" ? "contribution" : "percent",
      fill: d => d.is_key,
      tip: true,
      title: d => `${d.component}\nContribution: +${d.contribution.toFixed(2)} per 1,000\n% of Disparity: ${d.percent.toFixed(1)}%`
    }),
    Plot.text(decompositionData, {
      y: "component",
      x: selectedDecompMetric === "Contribution (per 1,000)" ? "contribution" : "percent",
      text: d => selectedDecompMetric === "Contribution (per 1,000)" 
        ? `+${d.contribution.toFixed(2)}`
        : `${d.percent.toFixed(1)}%`,
      textAnchor: "start",
      dx: 5,
      fill: "black",
      fontSize: 12,
      fontWeight: "bold"
    })
  ]
})
))
}});

</script>
</head>
<body>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="./">OHDSI-Stroke</a></li>
  </ol>
  <ol>
    <li class="observablehq-link"><a href="./">Home</a></li>
    <li class="observablehq-link"><a href="./methodology">Methodology</a></li>
    <li class="observablehq-link"><a href="./cohort-explorer">Interactive Cohort Explorer</a></li>
    <li class="observablehq-link"><a href="./statistics-report">Statistics Report</a></li>
    <li class="observablehq-link"><a href="./predictive-modeling">Predictive Modeling Report</a></li>
    <li class="observablehq-link"><a href="./explanatory-modeling">Explanatory Modeling Report</a></li>
    <li class="observablehq-link observablehq-link-active"><a href="./visualizations">Visualizations</a></li>
    <li class="observablehq-link"><a href="./key-takeaways">Key Takeaways</a></li>
    <li class="observablehq-link"><a href="./conclusions">Conclusions</a></li>
  </ol>
</nav>
<script>{const e=document.querySelector("#observablehq-sidebar"),o=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?o.checked=r==="true":o.indeterminate=!0;for(const t of document.querySelectorAll("#observablehq-sidebar summary")){const s=t.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${t.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<div id="observablehq-center">
<aside id="observablehq-toc" data-selector="h1:not(:first-of-type)[id], h2:first-child[id], :not(h1) + h2[id]">
<nav>
<div>Contents</div>
<ol>
<li class="observablehq-secondary-link"><a href="#statistics-report-visualizations">Statistics Report Visualizations</a></li>
<li class="observablehq-secondary-link"><a href="#predictive-modeling-visualizations">Predictive Modeling Visualizations</a></li>
<li class="observablehq-secondary-link"><a href="#explanatory-modeling-visualizations">Explanatory Modeling Visualizations</a></li>
</ol>
</nav>
</aside>
<main id="observablehq-main" class="observablehq">
<h1 id="visualizations" tabindex="-1"><a class="observablehq-header-anchor" href="#visualizations">Visualizations</a></h1>
<p>This page contains various graphs and visualizations associated with our results reports created throughout the in-depth analysis. You will find that the statistics/modeling reports all have links to the specified visualizations on this page. For any prevalence or specified cohort visuals, please refer to the <a href="./cohort-explorer">Interactive Cohort Explorer</a>.</p>
<hr>
<div class="observablehq observablehq--block"><!--:1d803bd4:--></div>
<h2 id="statistics-report-visualizations" tabindex="-1"><a class="observablehq-header-anchor" href="#statistics-report-visualizations">Statistics Report Visualizations</a></h2>
<br>
<h3 id="mental-health-burden-distribution" tabindex="-1"><a class="observablehq-header-anchor" href="#mental-health-burden-distribution">Mental Health Burden Distribution <a id="mh-burden-distribution-graph"></a></a></h3>
<p><em>Hover over each bar to get full information.</em></p>
<div class="observablehq observablehq--block"><!--:fc4a7439:--></div>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:37c790a9:--></div>
<p>Non-aphasia patients have higher within-population prevalence among those with no mental health conditions. However, as soon as the cohort has at least 1 mental health condition, aphasia patients have higher within-population prevalence.</p>
<br>
<h3 id="pim-burden-distribution" tabindex="-1"><a class="observablehq-header-anchor" href="#pim-burden-distribution">PIM Burden Distribution <a id="pim-burden-distribution-graph"></a></a></h3>
<p><em>Hover over each bar to get full information.</em></p>
<div class="observablehq observablehq--block"><!--:37e34a71:--></div>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:7055d6f3:--></div>
<br>
<h3 id="risk-score-distribution" tabindex="-1"><a class="observablehq-header-anchor" href="#risk-score-distribution">Risk Score Distribution <a id="risk-score-distribution-graph"></a></a></h3>
<p><em>Hover over each bar to get full information.</em></p>
<div class="observablehq observablehq--block"><!--:11d2cbde:--></div>
<div class="observablehq observablehq--block"><!--:1a83574b:--></div>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:bd42e600:--></div>
<br>
<hr>
<h2 id="predictive-modeling-visualizations" tabindex="-1"><a class="observablehq-header-anchor" href="#predictive-modeling-visualizations">Predictive Modeling Visualizations</a></h2>
<br>
<h3 id="roc-curve-model-comparison" tabindex="-1"><a class="observablehq-header-anchor" href="#roc-curve-model-comparison">ROC Curve Model Comparison</a></h3>
<p align="center">
    <img src="./_file/figs/roc_curves_comparison.99296921.png" width="700">
    <a id="roc-curve-graph"></a>
</p><br>
<br>
<h3 id="top-15-predictors-logistic-regression" tabindex="-1"><a class="observablehq-header-anchor" href="#top-15-predictors-logistic-regression">Top 15 Predictors (Logistic Regression) <a id="lr-odds-ratios-graph"></a></a></h3>
<p><em>Red line: OR=1 (no effect)</em></p>
<div class="observablehq observablehq--block"><!--:1aa0f7f9:--></div>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:93980d98:--></div>
<br>
<h3 id="shap-values" tabindex="-1"><a class="observablehq-header-anchor" href="#shap-values">SHAP Values</a></h3>
<p align="center">
    <img src="./_file/figs/shap_summary.f514f358.png" width="700">
    <a id="shap-graph"></a>
</p><br>
<br>
<h3 id="mean-shap-values" tabindex="-1"><a class="observablehq-header-anchor" href="#mean-shap-values">Mean SHAP Values</a></h3>
<p align="center">
    <img src="./_file/figs/shap_importance.112a8816.png" width="700">
    <a id="mean-shap-graph"></a>
</p><br>
<b4>
<hr>
<h2 id="explanatory-modeling-visualizations" tabindex="-1"><a class="observablehq-header-anchor" href="#explanatory-modeling-visualizations">Explanatory Modeling Visualizations</a></h2>
<br>
<h3 id="observed-readmission-rates" tabindex="-1"><a class="observablehq-header-anchor" href="#observed-readmission-rates">Observed Readmission Rates <a id="observed-readmission-rates-graph"></a></a></h3>
<p><em>Hover over each bar to get full information.</em></p>
<div class="observablehq observablehq--block"><!--:d37b1b8e:--></div>
<div class="observablehq observablehq--block"><!--:b6980c70:--></div>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:159c2026:--></div>
<br>
<h3 id="forest-plot-for-odds-ratios" tabindex="-1"><a class="observablehq-header-anchor" href="#forest-plot-for-odds-ratios">Forest Plot for Odds Ratios <a id="forest-plot"></a></a></h3>
<p><em>Make sure to hover over each section to get the full information.</em></p>
<p>This is a forest plot of odds ratios (ORs) predicting 180-day readmissions. The points show estimated ORs with 95% CIs. Values above 1.0 indicate increased risk. Red = key variables; asterisks = significance.</p>
<p>The extreme odds ratio for PIM Exposure (289,059) makes it difficult to visualize the other predictors on a standard scale, so you can toggle the display mode to look at either the log scale (with all predictors), the log scale excluding PIM (clearer comparison), or linear scale (compressed).</p>
<div class="observablehq observablehq--block"><!--:c5ba47a9:--></div>
<div class="observablehq observablehq--block"><!--:579975bf:--></div>
<div class="observablehq observablehq--block"><!--:815c3d5c:--></div>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:76cb0af9:--></div>
<br>
<h3 id="expected-events-per-1000-patients" tabindex="-1"><a class="observablehq-header-anchor" href="#expected-events-per-1000-patients">Expected Events Per 1000 Patients</a></h3>
<p align="center">
    <img src="./_file/figs/clinical_impact_events_per_1000.5fe8c382.png" width="700">
    <a id="events-per-1000-graph"></a>
</p><br>
<br>
<h3 id="marginal-effects-decomposition" tabindex="-1"><a class="observablehq-header-anchor" href="#marginal-effects-decomposition">Marginal Effects Decomposition <a id="marginal-effects-graph"></a></a></h3>
<p><em>Hover over each bar to get full information.</em></p>
<div class="observablehq observablehq--block"><!--:63992ba9:--></div>
<div class="observablehq observablehq--block"><!--:f81d42fc:--></div>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:08688b04:--></div>
<hr>
<p><strong>Last Updated:</strong> December 3, 2025</p>
</b4></main>
<footer id="observablehq-footer">
<nav><a rel="prev" href="./explanatory-modeling"><span>Explanatory Modeling Report</span></a><a rel="next" href="./key-takeaways"><span>Key Takeaways</span></a></nav>
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2025-12-04T01:50:38">Dec 4, 2025</a>.</div>
</footer>
</div>
</body>
</html>
